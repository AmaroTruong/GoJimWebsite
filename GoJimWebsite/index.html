<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>GoJim!</title>
    <link rel="stylesheet" href="main.css">
    <style>
      //css for grayscale theme
        .black-and-white {
            filter: grayscale(100%);
        }
    </style>
  </head>
    
    <header>
      <div class="header">
  <img href="index.html" src="logo.png">
  <div class="header-left">
    <nav>
    <a href="index.html">Home</a>
    <a href="aboutus.html">About</a>
    <a href="socialmedia.html">Socials</a>
    <a href="tipspage.html">Tips</a>
    <a href="Calc.html">Calculators</a>
    <a href="gymgallery.html">Gallery</a>
    <a href="goals.html">Set Goals</a>
    <a href="calorieTracker.html">Calorie Tracker</a>
    <a href="forum.html"> Forum</a>
    <a href="my3DModel.html">3DModel</a>
    </nav>
  </div>
  <div class="header-right">
    <a href="createAccount.html">Login</a>
    <a href="contactus.html">Contact Us</a>
  </div>
</div>
    </header>
    <button id="profileButton">Profile</button>
    <button id="themeToggle">GrayScale Theme</button>

    <body>
    <img src="Screenshot_2023-04-20_at_12.03.48_PM-removebg-preview_2.png"
</html>
<script type="module">
  

      
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
  import { getAuth, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js";
  import {getDatabase, ref, child, get } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js";


  
  const firebaseConfig = {
    apiKey: "AIzaSyC3Vuf4ma6wKrrphF7tbmd2ih0Qr28w2sM",
    authDomain: "gojim-26cbc.firebaseapp.com",
    databaseURL: "https://gojim-26cbc-default-rtdb.firebaseio.com",
    projectId: "gojim-26cbc",
    storageBucket: "gojim-26cbc.appspot.com",
    messagingSenderId: "491730952662",
    appId: "1:491730952662:web:2f430530eef2e0ebfbc477",
    measurementId: "G-C5KT1RZJYS"
  };
  
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getDatabase(app);

  const storedUserId = localStorage.getItem('userId');
  if (storedUserId) {
  
    auth.signInWithCustomToken(storedUserId)
      .then(() => console.log('User logged in automatically'))
      .catch((error) => console.log(error));
  }

   const profileButton = document.querySelector("#profileButton");
  profileButton.addEventListener('click', async (e) => {
    const user = auth.currentUser;
    if (user) {
      const userId = user.uid;
      const userRef = ref(db, `users/${userId}`);
      const snapshot = await get(child(userRef, 'email'));
      const email = snapshot.val();
      const htmlBlob = new Blob([`<!DOCTYPE html>
        <html>
          <head>
          <style>
    
    body {
      background-color: #FFFFFF;
      padding: 20px;
    }
    nav {
      background-color: #CCCCCC;
      padding: 10px;
      margin-bottom: 20px;
    }
    nav ul {
      list-style: none;
      display: flex;
      justify-content: space-between;
    }
    nav ul li {
      margin-right: 20px;
    }
    .slider {
      -webkit-appearance: none;
      width: 100%;
      height: 10px;
      background: #CCCCCC;
      outline: none;
      opacity: 0.7;
      -webkit-transition: .2s;
      transition: opacity .2s;
    }
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      background: #333333;
      cursor: pointer;
    }
    .slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: #333333;
      cursor: pointer;
    }
  </style>
            <title>Personalized Page</title>
          </head>
          <body>
          <nav>
          <ul>
          <li><a href="#threads">Threads</a></li>
          <li><a href="#likes">Likes</a></li>
          <li><a href="#comments">Comments</a></li>
        </ul>
        </nav>
            <h1>Welcome, ${email}!</h1>
            <h2>Profile Picture</h2>
    <button>Upload</button>
     <h2>Background Color</h2>
      <input type="range" min="0" max="255" value="128" class="slider" id="bgSlider">
    <script>
    const slider = document.getElementById("bgSlider");
    slider.addEventListener("input", () => {
  const value = slider.value;
  const hexValue = value.toString(16).padStart(2, '0').toUpperCase();
  });
        </body>
        </html>`], { type: 'text/html' });
      const htmlUrl = URL.createObjectURL(htmlBlob);
      window.open(htmlUrl, '_blank');
    }
  });
</script>
      <script>
        //switch theme 
    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
        document.body.classList.toggle('black-and-white');
    });
</script>
<footer class="footer">
  <div class="column left">
    <img src="logo.png">
    <p>Sweat today for a better tomorrow, GoJim!</p>
  </div>
  <div class="column middle">
    <p>Links:</p>
      <a href="index.html">Home</a>
      <a href="aboutus.html">About</a>
      <a href="tipspage.html">Tips</a>
      <a href="Calc.html">Calculators</a>
      <a href="gymgallery.html">Gallery</a>
      <a href="goals.html">Set Goals</a>
    
  </div>
  <div class="column right">
    <p>Contacts:</p>
    <a href="contact.html">Contact Us</a>
    <div class="copy">
    <p>Â© Copyright 2022 - This is an academic project and NOT a real company.</p>
    </div>
  </div>
  </div>
</footer>
